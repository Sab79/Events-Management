---
title: PDS Change of Address 
keywords:  messaging, bundles
tags: [fhir,messaging]
sidebar: overview_sidebar
permalink: pds_change_of_address.html
summary: "The FHIR profiles used for the PDS Change of Address event message bundle"
---

PDS Change of Address event messages are generated by the Spine and published to the NEMS when the `H (usual)` address of a patient is changed within their PDS record. The event message will contains the patients new address and their previous address as per the guidance below.


## Bundle structure

Specifies mandatory referencing within the Event Message Bundle.

<div style="text-align:center; margin-bottom:20px" >
	<a href="images/messages/change_of_address_bundle.png" target="_blank"><img src="images/messages/change_of_address_bundle.png"></a>
	<p>PDS Change of Address Bundle <a href="images/messages/change_of_address_bundle.png" target="_blank">(open in new TAB)</a></p>
</div>

The `CareConnect-Patient-1` resource within the bundle will contain two addresses, one will represent the patient's old address and one will represent the patients new address and will be identifiable by the `use` element within the addresses.


## PDS Change of Address Message Life Cycle ##

The `PDS Change of Address` event message will always contain a `messageEventType` extension with value `new` in the MessageHeader resource. There will be no `update` or `delete` version of this event message.

If a subscriber receives multiple `PDS Change of Address` event messages for the same patient, the latest event message as indicated by the `meta.lastUpdated` element within the MessageHeader resource should be considered the source of truth for the patient's correct address.

{% include important.html content="`PDS Change of Address` event messages will only be triggered for updates to the patients home address on the Spine. Changes to a patient temporary address on Spine will not trigger a `PDS Change of Address` event message to be sent through the EMS." %}


## Onward Delivery ##

The delivery of the PDS Change of Address event messages to subscribers via MESH will use the following `WorkflowID` within the MESH control file. This `WorkflowID` will need to be added to the receiving MESH mailbox configuration before event messages can be received.

| MESH WorkflowID | `CHILDHEALTH_CHANGEOFADDRESS_UPDATE` |


## Resource population requirements and guidance ##

The following requirements and resource population guidance should be followed in addition to the requirements and guidance outlined in the [Generic Requirements](https://developer.nhs.uk/apis/ems-beta/explore_genreic_event_requirements.html) page.


### [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle)

The Bundle resource is the container for the event message and SHALL conform to the [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle) FHIR profile.

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| type | 1..1 | Fixed value: `message` |


### [Event-MessageHeader-1](https://fhir.nhs.uk/STU3/StructureDefinition/Event-MessageHeader-1)

The MessageHeader resource included as part of the event message SHALL conform to the [Event-MessageHeader-1](https://fhir.nhs.uk/STU3/StructureDefinition/Event-MessageHeader-1) constrained FHIR profile and the additional population guidance as per the table bellow:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| meta.lastUpdated | 1..1 | DateTime when the patient record was updated with the details included in this event message. This element should be used for message sequencing |
| extension(messageEventType) | 1..1 | Fixed value: `new` |
| event | 1..1 | Fixed Value: pds-change-of-address-1 (PDS Change of Address) |
| responsible | 1..1 | This will reference the source organization of the event message.<br/> For PDS events this will be a reference to a CareConnect-Organization-1 resource within the message bundle. **\*** |
| focus | 1..1 | This will reference the "CareConnect-Communication-1" resource which contains information relating to the event message. |


### [CareConnect-Communication-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Communication-1)

The Communication resource included in the event message SHALL conform to the [CareConnect-Communication-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Communication-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| status | 1..1 | Fixed value: `completed` |
| sender | 1..1 | This will reference the sending organization of the event message.<br/> For PDS events this will be a reference to a CareConnect-Organization-1 resource within the message bundle. **\***|
| subject | 1..1 | This will reference the patient resource representing the patient who is the subject of this event. |


### [CareConnect-Patient-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1)

The patient resource included in the event message SHALL conform to the [CareConnect-Patient-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| meta.versionId | 1..1 | This element will contain the serial change number (SCN) of the patient record within Spine at the time this event was published. |
| identifier | 1..1 | Patient NHS Number SHALL be included within the nhsNumber identifier slice |
| telecom.system | 0..1 | Mapping between the FHIR values and PDS values is as per the table below. |
| telecom.use | 0..1 | Mapping between the FHIR values and PDS values is as per the table below. |
| **Current Address** |
| address.use | 1..1 | Fixed value: **home** <br/> Mapping between the FHIR values and PDS values is as per the table below. |
| address.line | 1..* | Current address lines. Note: the address lines SHALL appear in the the resource in order, i.e. Address line 1 first, line 2 second, etc. |
| address.city | 0..1 | If included the city part of the current address. |
| address.district | 0..1 | If included the county element of the current address. |
| address.postalcode | 1..1 | Current address post code |
| address.text | 1..1 | Text representation of the patients current address in full |
| address.period.start | 1..1 | The date from which the patients current address was valid |
| **Previous Address** |
| address.use | 1..1 | Fixed value: **old**  <br/> Mapping between the FHIR values and PDS values is as per the table below. |
| address.line | 1..* | Previous address lines. Note: the address lines SHALL appear in the the resource in order, i.e. Address line 1 first, line 2 second, etc. |
| address.city | 0..1 | If included the city part of the previous address. |
| address.district | 0..1 | If included the county element of the previous address. |
| address.postalcode | 1..1 | Previous address post code |
| address.text | 1..1 | Text representation of the patients previous address in full |
| address.period.start | 1..1 | The date from which the patients previous address was valid |
| address.period.end | 0..1 | The date from which the patients previous address was no longer their current address |


### [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1)

The Organization resource(s) included in the event message SHALL conform to the [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..2 |

| Element | Cardinality | Additional Guidance |
|---------|-------------|---------------------|
| identifier.system | 1..1 | Fixed value: https://fhir.nhs.uk/Id/ods-organization-code |
| identifier.system | 1..1 | Organisation's ODS Organization Code |
| name | 1..1 | Organisation's Name |

**\*** Organization details may be retrieved using the [ODS Lookup API](https://developer.nhs.uk/apis/ods/restfulapis_identification_organization.html) as [ODSAPI-Organization-1](https://fhir.nhs.uk/STU3/StructureDefinition/ODSAPI-Organization-1) resources. These MUST then be transformed to [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1) resources for use within the event message bundle.

**NB:** 'responsible' and 'sender' organisations may be the same or different organisations, therefore requiring a single or two CareConnect-Organization-1 resources within the event message bundle.


### [CareConnect-HealthcareService-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-HealthcareService-1)

The HealthcareService resource included in the event message SHALL conform to the [CareConnect-HealthcareService-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-HealthcareService-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 0..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| providedBy | 1..1 | This will reference the 'sender' organization of the event message. |
| type | 1..1 | Fixed value: PDS (Personal Demographics Service)<br/>This will represent the type of service responsible for the event message. This will have a fixed value from the ValueSet [EMS-HealthcareServiceType-1](https://fhir.nhs.uk/STU3/ValueSet/EMS-HealthcareServiceType-1) |


## PDS Change of Address Example ##

<script src="https://gist.github.com/IOPS-DEV/828562b2e3edaec1ed43f48645f5376a.js"></script>

