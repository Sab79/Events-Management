---
title: Failsafe Message Response
keywords:  messaging, bundles, failsafe
tags: [fhir,messaging]
sidebar: overview_sidebar
permalink: failsafe_message_response.html
summary: "The FHIR profiles used for the Failsafe Message Response Event Message Bundle"
---

## Event Message Content ##

The Failsafe Message Response is generated by an Organisation or Service in response to a Failsafe Message. The purpose of a Failsafe Message Response is to notify stakeholders that a task that is covered under the failsafe rules, cannot be fulfilled for a certain amount of time (for example, performing an intervention or registering with a service and the person is unavailable), because of a certain reason (for example, person is in Neonatal Unit/Hospital/unwell). Stakeholders may include the National Failsafe Management Service (NFMS) as well as other consumers. This may result in either suspending NFMS activity in evaluating a population failsafe rule, or enabling other local business processes (e.g. workflows and UI) in making the information known and available to Healthcare Professionals.

The Failsafe Message Response MUST include the identifier (CareConnect-Task-1.identifier) of the Failsafe Message that it is responding to.

All “Failsafe Message Response” event messages that are published to the NEMS MUST be created in line with guidance and requirements specified on this page and on the [Generic Event Message Requirements](explore_generic_event_requirements.html) page.

## Bundle Structure ##

Specifies mandatory referencing within the Event Message Bundle

<div style="text-align:center; margin-bottom:20px" >
	<a href="images/messages/failsafe_message_response.png" target="_blank"><img src="images/messages/failsafe_message_response.png"></a>
</div>

## Failsafe Message Response Event Message Types ##

The Failsafe Message Response will be sent by an organisation or service in response to a Failsafe Message. The Failsafe Message Response event message type should be the “equivalent” to the Failsafe Message being responded to.

## Event Life Cycle ##

The MessageHeader resource contains the messageEventType extension which represents the action to be taken at a resource level, for example, whether the Failsafe Message Response being shared is new or has been updated, or the Failsafe Message Response is to be deleted. The messageEventType extension shall contain a value as per the table below:

| Value  | Description                                                                                      |
|--------|--------------------------------------------------------------------------------------------------|
| new    | The new value must be used when the Failsafe Message Response is being shared for the first time |
| update | The update value must be used when an amendment to the Failsafe Message Response is being shared |
| delete | The delete value must be used when the Failsafe Message Response record has been withdrawn       |

## Identifying Information ##

To support the event life cycle outlined above the following requirements MUST be followed:
* For new and update messageEventTypes, all Failsafe Message Response information MUST be included within the messages.
* For update and delete message EventTypes, the same Task identifier MUST be used (in CareConnect-Task-1.identifier) as was used in the original NEW message AND the original Failsafe Message identifier quoted (in CareConnect-Task-1.groupIdentifier – see below).Only the originator of the Failsafe Message Response can send an update or delete to a given Failsafe Message Response
* The information included in the Failsafe Message Response event message should be treated as atomic and stored under the identifier included within focus CareConnectTask-1 resource (CareConnect-task1.identifier). Where a new type event message is received with the same identifier (for example an update), the previous information should be overwritten with the information in the later event message. The order of messages should be determined using the Event-MessageHeader.meta.lastUpdated element within the event message header.
* In a delete messageEventType, the event message should be populated with the payload of the latest Failsafe Message Response information (whether that was a new or updated message) where possible, to allow for additional validation of the information being removed. Where this is not possible the delete Failsafe Message Response SHALL include as a minimum, a completed MessageHeader resource and the focus CareConnect-Task-1 resource, with the CareConnect-Task-1.identifier and CareConnect-Task-1.groupIdentifier populated.

## Messaging Sequencing ##

As the Failsafe Message Response may change in the source system, this would be represented by a single new and potentially one or more subsequent update and delete type event messages being published. To allow subscribers to perform message sequencing, the event MUST include the meta.lastUpdated element within the MessageHeader resource allowing the consumer to identify the latest and most up to date information.

## Onward Delivery ##

The delivery of the Failsafe Message Response to subscribers via MESH will use the following WorkflowID within the MESH control file. This WorkflowID will need to be added to the receiving MESH mailbox configuration before event messages can be received.

|    Event   type                                     |    Workflow Group                                 |    Workflow ID                                  |
|-----------------------------------------------------|---------------------------------------------------|-------------------------------------------------|
|    Failsafe Message ResponseGP                      |    FAILSAFE_MESSAGE_RESPONSE_GP                   |    FAILSAFEMESSAGERESPONSEGP_1                  |
|    Failsafe Message  Response HVS                   |    FAILSAFE_MESSAGE_RESPONSE _HVS                 |    FAILSAFEMESSAGERESPONSEHVS_1                 |
|    Failsafe Message Response Bloodspot   Outcome    |    FAILSAFE_MESSAGE_RESPONSE_BLOODSPOT_OUTCOME    |    FAILSAFEMESSAGERESPONSEBLOODSPOTOUTCOME_1    |
|    Failsafe Message Response NIPE Newborn           |    FAILSAFE_MESSAGE_RESPONSE_NIPE_NEWBORN         |    FAILSAFEMESSAGERESPONSENIPENEWBORN_1         |
|    Failsafe Message Response Newborn   Hearing      |    FAILSAFE_MESSAGE_RESPONSE_NEWBORN_HEARING      |    FAILSAFEMESSAGERESPONSENEWBORNHEARING_1      |

## Resource Population Requirements and Guidance ##

The following requirements and resource population guidance should be followed in addition to the requirements and guidance outlined in the Generic Requirements page.

## Resource Mapping Overview ##

|    Data   Item                               |    FHIR   resource element                                                                            |    Card             |    Notes                                                                                                                                                                                                                                                                                                                                                                                         |
|----------------------------------------------|-------------------------------------------------------------------------------------------------------|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|    Originating   Organisation                |    CareConnect-Organization-1.identifier   (ODS Organisation Code) <br/><br/>CareConnect-Organization-1.name    |    1..1  <br/><br/><br/><br/><br/> 1..1      |    This   is the ODS code & name of the organisation or service that originated the   Failsafe Message Response                                                                                                                                                                                                                                                                                  |
|    Date   and Time Created                   |    Event-MessageHeader-1.meta.lastUpdated <br/><br/>  CareConnect-Task-1.authoredOn                             |    1..1 <br/><br/><br/><br/>  1..1      |    The   Date and Time created will be carried both in the MessageHeader and Task   resource                                                                                                                                                                                                                                                                                                     |
|    Team                                      |    CareConnect-CareTeam-1.name                                                                        |    0..1             |    Team   of the health professional making the Failsafe Message Response – may be team   as well as a user. Allows the recipient to contact a team rather than an   individual                                                                                                                                                                                                                  |
|    User                                      |    CareConnect-Practitioner-1.identifier  <br/><br/> CareConnect-Practitioner-1.name                            |    1..1 <br/><br/><br/>  1..1      |    Allows   recipient to understand who provided the information and who to contact. Note   that the Failsafe Message Response message does not flow to any personal   health record                                                                                                                                                                                                             |
|    Practitioner   Role                       |    CareConnect-PractitionerRole-1.code                                                                |    0..1             |    Role   of the health professional (User) making the Failsafe Message Response. Allows   recipient to understand who provided the information and who to contact                                                                                                                                                                                                                               |
|    Original   Failsafe Message Identifier    |    CareConnect-Task-1.groupIdentifier                                                                 |    1..1             |    The   reference to the Failsafe Message being responded to                                                                                                                                                                                                                                                                                                                                    |
|    Failsafe   Response Type                  |    Event-MessageHeader-1.event  <br/><br/> CareConnect-Task-1.code                                              |    1..1  <br/><br/><br/><br/> 1..1      |    The   Failsafe Message Response type will be carried in both the MessageHeader and   Task resource                                                                                                                                                                                                                                                                                            |
|    Identifier                                |    CareConnect-Task-1.identifier                                                                      |    1..1             |    A   publisher defined unique identifier for the Failsafe Message Response which   will be maintained across different event messages to allow subscribers to   identify the information within subsequent new (i.e. updated) or delete event   messages                                                                                                                                       |
|    End   Date                                |    CareConnect-Task-1.restriction.period.end                                                          |    0..1 Required    |    The date until which the Failsafe Message   Response publisher advised that the task cannot be fulfilled or pursued (i.e.   activity can resume on the end date)                                                                                                                                                                                                                              |
|    Failsafe   Response Reason                |    CareConnect-Task-1.reason                                                                          |    1..1             |    The   reason the Failsafe Message Response has been generated. By preference this should   be a coded value from the valueSet FailsafeResponseReason-1, however if no   code exists for the intended reason, then the code of “other” should be used,   and the text element of the CodeableConcept should be used to carry a reason   for the generation of the Failsafe Message Response    |
|    Sub Reason                |    CareConnect-Task-1.reason                                                                       |    0..*             |    Free text containing a sub reason which must be associated with a reason. One reason will have none to many sub-reasons. One sub reason will have one high level reason.     |
|    Additional Information                |    CareConnect-Task-1.reason                                                                          |    0..1             |    Free text containing an explanation for use of ’Other - with mandatory text in the clinical record’ is mandatory. Optionally, additional information can be provided for all other reasons.     |

### [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle)

The Bundle resource is the container for the event message and SHALL conform to the Bundle FHIR profile.

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| type                 | 1..1        | Fixed value: message |

### [Event-MessageHeader-1](https://fhir.nhs.uk/STU3/StructureDefinition/Event-MessageHeader-1)

The MessageHeader resource included as part of the event message SHALL conform to the Event-MessageHeader-1 constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

|--------------------------------|-------------|-------------------------------------------------------------------------------------------------------------|
| Element                        | Cardinality | Additional Guidance                                                                                         |
| --- | --- | --- |
| meta.lastUpdated               | 1..1        | The dateTime when the message was created.                                                                  |
| extension(RoutingDemographics) | 1..1        | Common to all EMS messages                                                                                  |
| extension(messageEventType)    | 1..1        | See the “Event Life Cycle” section above.                                                                   |
| event                          | 1..1        | A Failsafe Message event type from the EventType-1 valueSet (https://fhir.nhs.uk/STU3/ValueSet/EventType-1) |
| focus                          | 1..1        | This will reference the CareConnect-Task-1 resource.                                                        |

### [CareConnect-Task-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Task-1)

The Task shall conform the CareConnect-Task-1 constrained FHIR profile and the additional guidance as per the table below:

| Resource Cardinality   | 1..1 |

|------------------------|-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Element                | Cardinality | Additional Guidance                                                                                                                                                                                                                                          |
| --- | --- | --- |
| identifier             | 1..1        | A publisher defined unique identifier for the Failsafe Message Response. This must be re-quoted for all subsequent update and delete messages                                                                                                                |
| groupIdentifier        | 1..1        | The CareConnect-Task-1.identifier of the Failsafe Message being responded to                                                                                                                                                                                 |
| status                 | 1..1        | A mandated element. Fixed to “received”                                                                                                                                                                                                                      |
| intent                 | 1..1        | A mandated element. Fixed to “plan”                                                                                                                                                                                                                          |
| code                   | 1..1        | A repeat of the Event-MessageHeader-1.event code                                                                                                                                                                                                             |
| for                         | 1..1         | A link to the patient                                                                                                                                                                                                                                                                                             |
| authoredOn             | 1..1        | The date and time at which the Failsafe Message Response was created                                                                                                                                                                                         |
| requester.agent        | 1..1        | A link to the practitioner who created the Failsafe Message Response                                                                                                                                                                                         |
| requester.onBehalfOf   | 1..1        | A link to the organisation or service that generated the Failsafe Message Response                                                                                                                                                                           |
| reason                 | 1..1        | The reason the Failsafe Message Response was created from the valueSet [FailsafeResponseReason-1](https://fhir.nhs.uk/STU3/ValueSet/EMS-FailsafeResponseReason-1). If a suitable coded value is not available, then the code “other” should be used, and the text element of CodeableConcept is used to carry a textual reason. This can also be used for Sub Reason and Additional Information elements |
| restriction.period.end | 1..1        | The date until which the Failsafe Message Response publisher advised that the task cannot be fulfilled or pursued (i.e. activity can resume on the end date)                                                                                                 |

### [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1)

The Organization resources included in the bundle SHALL conform to the CareConnect-Organization-1 constrained FHIR profile and the additional population guidance as per the table below. Both Organization references (Event-MessageHeader-1.responsible & CareConnect-Task-1.requester.onBehalfOf) reference the same Organization.

| Resource Cardinality | 1..1  |

|----------------------|-------------|-----------------------------------------------------------------------------------------------------------|
| Element              | Cardinality | Additional Guidance                                                                                       |
| --- | --- | --- |
| identifier           | 1..1        | The ODS code of the organization or service issuing the Failsafe Message Response                         |
| name                 | 1..1        | A human readable name for the organization or service                                                     |
| telecom              | 0..*        | Contact details for use by subscribers in relation to communications about this Failsafe Message Response |

### [CareConnect-Practitioner-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Practitioner-1)

The Practitioner shall conform the CareConnect-Practitioner-1 constrained FHIR profile and the additional guidance as per the table below:

| Resource Cardinality | 1..1 |

|----------------------|-------------|------------------------------------------------------------------------------------------|
| Element              | Cardinality | Additional Guidance                                                                      |
| --- | --- | --- |
| identifier           | 1..1        | The SDS User Id of the healthcare Professional who created the Failsafe Message Response |
| name                 | 1..1        | The name of the healthcare professional who created the Failsafe Message Response        |

### [CareConnect-PractitionerRole-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-PractitionerRole-1)

The CareConnect-PractitionerRole-1 resource included as part of the event message SHALL conform to the CareConnect-PractitionerRole-1 constrained FHIR profile.

| Resource Cardinality | 0..1 |


### [CareConnect-CareTeam-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-CareTeam-1)

The Care Team shall conform the CareConnect-CareTeam-1 constrained FHIR profile and the additional guidance as per the table below:

| Resource Cardinality   | 0..1 |

|------------------------|-------------|--------------------------------------------------------------------------------------------------------|
| Element                | Cardinality | Additional Guidance                                                                                    |
| --- | --- | --- |
| name                   | 1..1        | The name of the care team                                                                              |
| participant.member     | 1..1        | A link from the care team to the healthcare professional who created the Failsafe Message Response     |
| participant.onBehalfOf | 1..1        | A link from the care team to the organisation or service responsible for the Failsafe Message Response |

### [CareConnect-Patient-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1)

The Patient resource included as part of the event message SHALL conform to the CareConnect-Patient-1 constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

|----------------------|-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Element              | Cardinality | Additional Guidance                                                                                                                                                            |
| --- | --- | --- |
| identifier           | 1..1        | Patient NHS Number SHALL be included within the NHSNumberidentifier slice                                                                                                      |
| name (official)      | 1..1        | Patients name as registered on PDS, included within the resource as the official name element slice                                                                            |
| birthDate            | 1..1        | The patient birth date shall be included in the patient resource. If the time of birth is known, then the birthDateTime extension should also be sent along with the birthDate |

## Example

<div class="tabPanel">

	<div class="tabHeadings">
		<span class="tabHeading" id="new">FailsafeMessageResponse</span>
	</div>
	
	<div class="tabBodies">
	
		<div class="tabBody" id="newBody" markdown="span">
			```{% include_relative examples/FailsafeResponse.xml %}```
		</div>
		
	</div>
</div>

